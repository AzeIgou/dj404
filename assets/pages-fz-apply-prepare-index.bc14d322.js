import{R as e,k as a,a1 as l,am as t,m as s,p as r,as as o,at as n,o as u,b as i,a as p,w as m,g as c,x as f,F as d,r as _,Y as b,a4 as g,B as h,C as y,h as v,j,c as C,f as x,t as k,M as w,J as T,S as z}from"./index.f8f0a8a6.js";import{_ as I}from"./u-navbar.1284843c.js";import{_ as A}from"./message.vue_vue_type_script_setup_true_lang.2049d432.js";import{_ as B}from"./u-search.e7ce9eeb.js";import{_ as L}from"./u-input.f5a1625f.js";import{u as S,_ as F}from"./useTabSwiper.1a899c38.js";import{_ as V}from"./u-tag.2e01dec1.js";import{_ as $}from"./u-button.9b5620aa.js";import{_ as D}from"./pagination.vue_vue_type_script_setup_true_lang.a8071f8a.js";import{_ as H}from"./u-select.71281130.js";import{g as M}from"./go.241c4b18.js";import{w as P}from"./index.14235ccc.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";import"./emitter.9c2dba95.js";import"./u-badge.ceeaba0f.js";import"./u-loadmore.9028c00d.js";import"./u-line.334abfea.js";const W=a=>e.get({url:"/mobile/fz-formal-pm/selectFormalPMList",data:a}),q=R(a({__name:"index",setup(e){g((e=>({"4c70096e":f(a)})));const{statusBarHeight:a}=l(),R=t(),q=s(null),J=s(null),U=s(!1),{tabCurrent:Y,swiperCurrent:E,tabsChange:G,transition:K,animationFinish:N}=S(q),O=r((()=>[{name:"学生",api:W,selectLabel:"",params:{},searchInfo:w({partyCommitteeCode:void 0,partyBranchCode:void 0,realname:void 0})},{name:"教师",api:W,selectLabel:"",params:{userType:1},searchInfo:w({partyCommitteeCode:void 0,partyBranchCode:void 0,realname:void 0})}])),Q=e=>{O.value[Y.value].searchInfo.partyCommitteeCode=e[0].value,O.value[Y.value].searchInfo.partyBranchCode=e[1].value,O.value[Y.value].selectLabel=e.map((e=>e.label)).join("-")};return o((()=>{console.log("refresh"),J.value.reload(),setTimeout((function(){n()}),1e3)})),(e,a)=>{const l=h(y("u-navbar"),I),t=h(y("message"),A),s=h(y("u-search"),B),r=v,o=h(y("u-input"),L),n=h(y("u-tabs-swiper"),F),g=T,w=h(y("u-tag"),V),S=h(y("u-button"),$),W=h(y("pagination"),D),X=z,Z=j,ee=h(y("u-select"),H);return u(),i(d,null,[p(l,{title:"预备党员",background:{background:"var(--dj-themed-color)"},"border-bottom":!1,"title-color":"#fff","back-icon-color":"#fff"},null,8,["background"]),p(t,{navbarHeight:48}),p(r,{class:"container"},{default:m((()=>[c(" 搜索 "),p(r,{class:"px-2 pb-2 pt-1 bg--do-dj-themed-color"},{default:m((()=>[p(s,{placeholder:"请输入关键信息",shape:"square","action-style":{color:"#ffffff"},onSearch:a[0]||(a[0]=e=>f(O)[f(Y)].searchInfo.realname=e)})])),_:1}),p(r,null,{default:m((()=>[p(o,{type:"select","input-align":"center",placeholder:"请选择党组织信息","model-value":f(O)[f(Y)].selectLabel,"custom-style":{fontWeight:"bold"},onClick:a[1]||(a[1]=e=>U.value=!0)},null,8,["model-value"])])),_:1}),c(" Swiper "),p(n,{ref_key:"uTabs",ref:q,list:f(O),current:f(Y),onChange:f(G),"is-scroll":!1,swiperWidth:"750","active-color":"#D13333","bg-color":"rgb(245, 247, 251)"},null,8,["list","current","onChange"]),c(" 列表 "),p(Z,{class:"h-full",current:f(E),onTransition:f(K),onAnimationfinish:f(N)},{default:m((()=>[(u(!0),i(d,null,_(f(O),((e,a)=>(u(),C(X,{class:"swiper-item",key:a},{default:m((()=>[p(W,{ref_for:!0,ref_key:"paginationRef",ref:J,api:e.api,params:{...e.params,...e.searchInfo},option:{resultField:"data",pageSize:20}},{default:m((e=>[(u(!0),i(d,null,_(e.data,((e,a)=>(u(),C(r,{class:"flex p-4 bg-white m-4 rounded-20rpx",key:e.username,onClick:a=>f(M)(`/pages/fz-apply/prepare/detail?username=${e.username}`)},{default:m((()=>[p(r,{class:"w-full flex flex-col gap-2"},{default:m((()=>[p(r,{class:"flex justify-between w-full reactive"},{default:m((()=>[p(g,{class:"font-bold text-34rpx"},{default:m((()=>[x(k(e.realname),1)])),_:2},1024),p(w,{text:f(P)[e.formalApplyType].description,type:f(P)[e.formalApplyType].type,mode:"light"},null,8,["text","type"])])),_:2},1024),p(r,null,{default:m((()=>[x("班级："+k(e.stuClass),1)])),_:2},1024),p(r,null,{default:m((()=>[x("学号："+k(e.username),1)])),_:2},1024),p(r,null,{default:m((()=>[x("预备党员日期："+k(e.pmTime),1)])),_:2},1024),p(r,null,{default:m((()=>[x("转正申请日期："+k(e.formalApplyDate),1)])),_:2},1024),p(r,null,{default:m((()=>[x("转正申请审核状态："+k(f(P)[e.formalApplyType].description),1)])),_:2},1024),p(r,{class:"flex justify-end gap-3"},{default:m((()=>[p(S,{size:"mini",shape:"circle","custom-style":{padding:"0 30rpx"},onClick:a=>f(M)(`/pages/fz-apply/prepare/apply?username=${e.username}`)},{default:m((()=>[x(" 查看转正申请 ")])),_:2},1032,["onClick"]),c(' <u-button\r\n                    size="mini"\r\n                    shape="circle"\r\n                    :custom-style="{ padding: \'0 30rpx\' }"\r\n                    @click="go(`/pages/fz-apply/formal-apply/submit?username=${item.username}`)"\r\n                  >\r\n                    提交转正申请\r\n                  </u-button> ')])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1032,["api","params"])])),_:2},1024)))),128))])),_:1},8,["current","onTransition","onAnimationfinish"])])),_:1}),p(ee,{modelValue:f(U),"onUpdate:modelValue":a[2]||(a[2]=e=>b(U)?U.value=e:null),mode:"mutil-column-auto",list:f(R).getPartyBranchCascader,onConfirm:Q},null,8,["modelValue","list"])],64)}}}),[["__scopeId","data-v-500ca315"]]);export{q as default};
