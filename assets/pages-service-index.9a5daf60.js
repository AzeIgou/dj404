import{k as e,l as t,L as s,u as a,m as l,M as i,E as n,p as o,o as r,b as c,a as u,w as d,g as f,n as v,x as m,f as p,t as g,F as _,r as h,B as x,C as y,h as b,K as k,c as w,d as j,A as T,J as q}from"./index.7dddb93e.js";import{_ as z}from"./u-navbar.2247389e.js";import{_ as C,a as F}from"./message.vue_vue_type_script_setup_true_lang.167ae55e.js";import{_ as M}from"./u-button.7f757efe.js";import{_ as S}from"./u-section.0d3c8435.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";const I=E(e({__name:"index",setup(e){const E=t(),I=s(),B=a(),H=l(!1);l(-1);const L=l(),N=i({menu:-1,frequent:-1}),U=n().statusBarHeight||0,A=l(E.getLocalInfo("FREQUENT_MENU")||[]),J=o((()=>{const e=[];for(const t of B.getService)for(const s of t.children){const t=A.value.findIndex((e=>+s.id==e));-1!=t&&(e[t]=s)}return[...e].reverse()})),K=e=>{setTimeout((()=>{N[e]=-1}),200)};return(e,t)=>{const s=x(y("u-navbar"),z),a=x(y("message"),C),l=x(y("u-button"),M),i=x(y("u-section"),S),n=x(y("u-icon"),F),o=q,Q=b,R=k;return r(),c(_,null,[u(s,{"is-back":!1,title:"服务中心","title-color":"#fff",background:{background:"var(--dj-themed-color)"},"border-bottom":!1},null,8,["background"]),u(a,{navbarHeight:48}),u(Q,{class:"container"},{default:d((()=>[f(" 常用服务 "),u(Q,{class:"p-2 bg--do-dj-themed-color sticky z-10",style:v({top:m(U)+43+"px"})},{default:d((()=>[u(i,{bold:!1,color:"#fff","show-line":!1,title:"常用服务"},{right:d((()=>[u(l,{size:"mini",type:"error",onClick:t[0]||(t[0]=e=>H.value=!m(H))},{default:d((()=>[p(g(m(H)?"保存":"编辑"),1)])),_:1})])),_:1}),u(R,{"scroll-x":"","scroll-into-view":m(L),class:"whitespace-nowrap scroll-x"},{default:d((()=>[(r(!0),c(_,null,h(m(J),((e,s)=>(r(),w(Q,{id:"menu_"+e.id,class:"w-1-sl-4 inline-block",key:e.id},{default:d((()=>[u(Q,{class:j(["flex flex-col items-center py-2 mr-2 relative",[m(H)&&"edit",m(N).frequent==+e.id&&"opacity-60",!e.url&&"opacity-60"]]),style:v({backgroundColor:m(H)?"#ffffff33":"transparent"}),onTouchstart:t=>m(N).frequent=+e.id,onTouchend:t[1]||(t[1]=e=>K("frequent")),onClick:e=>(e=>{if(H.value)return A.value.splice(A.value.length-e-1,1),void E.setFrequentMenu(A.value,!0);J.value[e].url&&T({url:J.value[e].url})})(s)},{default:d((()=>[m(H)?(r(),w(n,{key:0,class:"absolute top-20 right-8",size:"36",name:"/static/icon/service/remove.svg"})):f("v-if",!0),""!=e.icon?(r(),w(n,{key:1,name:"/static/icon/service"+e.icon,size:80},null,8,["name"])):f("v-if",!0),u(o,{class:"grid-text text-white text-center"},{default:d((()=>[p(g(e.name),1)])),_:2},1024)])),_:2},1032,["class","style","onTouchstart","onClick"])])),_:2},1032,["id"])))),128))])),_:1},8,["scroll-into-view"])])),_:1},8,["style"]),f(" 菜单 "),(r(!0),c(_,null,h(m(B).getService,((e,s)=>(r(),w(Q,{class:"mx-2 flex flex-col",key:s},{default:d((()=>[u(i,{class:"my-4","font-size":"30","show-line":!1,right:!1,title:e.name},null,8,["title"]),u(Q,{class:"mb-2 grid grid-cols-4 gap-2 justify-center"},{default:d((()=>[(r(!0),c(_,null,h(e.children,((e,a)=>(r(),w(Q,{class:j(["flex flex-col items-center py-2 relative",[m(H)&&"edit",m(N).menu==+e.id&&"opacity-60",!e.url&&"opacity-60"]]),index:e.id,key:e.id,onTouchstart:t=>m(N).menu=+e.id,onTouchend:t[2]||(t[2]=e=>K("menu")),onClick:e=>((e,t)=>{const s=B.getService[e].children[t];if(H.value)return A.value.length>=9?void I.showToast({title:"最多收藏9个服务",type:"warning",position:"top"}):(E.setFrequentMenu([...new Set([s.id,...A.value])],!0),A.value=E.getFrequentMenu,void(L.value=`menu_${s.id}`));console.log(B.getService,s),s.url&&T({url:s.url})})(s,a)},{default:d((()=>[m(H)?(r(),w(n,{key:0,class:"absolute top-4 right-4",size:"36",name:"/static/icon/service/add.svg"})):f("v-if",!0),""!=e.icon?(r(),w(n,{key:1,name:"/static/icon/service"+e.icon,size:80},null,8,["name"])):f("v-if",!0),u(o,{class:"grid-text text-center"},{default:d((()=>[p(g(e.name),1)])),_:2},1024)])),_:2},1032,["class","index","onTouchstart","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)),u(Q,{class:"h-96"})])),_:1}),u(Q,{class:"h-100"})],64)}}}),[["__scopeId","data-v-59bceff1"]]);export{I as default};
