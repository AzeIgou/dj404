import{k as e,L as a,T as t,m as l,q as s,o,b as u,a as i,w as c,x as n,c as r,f as p,t as d,F as f,r as m,g as _,Y as v,Z as y,Q as g,B as w,C as x,h as b,aq as h,e as j,a6 as k,D as C,a7 as V}from"./index.7dddb93e.js";import{_ as z}from"./u-navbar.2247389e.js";import{_ as F,d as U}from"./message.vue_vue_type_script_setup_true_lang.167ae55e.js";import{_ as R,a as S}from"./u-cell-group.3ff6fc80.js";import{_ as T}from"./u-button.7f757efe.js";import{_ as q}from"./u-input.4a92a7e0.js";import{a as A,r as D}from"./index.ef7b58f7.js";import{w as P}from"./workflow.7aa87218.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./emitter.9c2dba95.js";import"./u-line.65c408c3.js";import"./index.14235ccc.js";const B=e({__name:"detail",setup(e){const B=a();t();const H=l(),L=l(!1),Q=l(""),Y=l(!1),Z=l(),$=l(),E=l();s((async e=>{if(e&&e.code){Y.value=e.canApprove,E.value=e.code;const a=await A({code:e.code});$.value=a.flowCode,H.value=a}}));const G=async e=>{await D({flowCode:$.value,opinion:Z.value,state:e,code:E.value}),B.showTips({title:"审批成功",type:"success"}),y("approveSuccess"),setTimeout((()=>{g({url:`/pages/committeeSec/detail?code=${E.value}`}),Z.value=""}),1e3)};return(e,a)=>{const t=w(x("u-navbar"),z),l=w(x("message"),F),s=w(x("u-cell-item"),R),y=b,g=w(x("u-button"),T),A=w(x("u-cell-group"),S),D=w(x("u-input"),q),B=h,$=w(x("u-modal"),U);return o(),u(f,null,[i(t,{title:"双创详情"}),i(l,{navbarHeight:48}),i(y,{class:"container"},{default:c((()=>[n(H)?(o(),r(A,{key:0},{default:c((()=>[i(s,{title:"提交时间",arrow:!1},{"right-icon":c((()=>[p(d(n(H).createtime.split(" ")[0]),1)])),_:1}),i(s,{title:"典型案例",arrow:!1},{label:c((()=>[(o(!0),u(f,null,m(n(H).typicalCases,((e,a)=>(o(),r(y,{class:"w-full flex justify-between items-center",key:a},{default:c((()=>[i(y,null,{default:c((()=>[p(d(e.title),1)])),_:2},1024),i(y,{class:"mr-auto"},{default:c((()=>[i(g,{type:"info",size:"mini",onClick:j((a=>(e=>{k({url:C.ResourceUrl+e.content,success:function(e){const a=e.tempFilePath;V({filePath:a,success:function(e){console.log("打开文档成功")}})}})})(e)),["stop"])},{default:c((()=>[p("点击预览")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),i(s,{title:"微视频",arrow:!1},{label:c((()=>[(o(!0),u(f,null,m(n(H).videos,((e,a)=>(o(),r(y,{class:"w-full flex justify-between items-center",key:a},{default:c((()=>[i(y,null,{default:c((()=>[p(d(e.title),1)])),_:2},1024),i(y,null,{default:c((()=>[i(g,{type:"info",size:"mini",onClick:j((a=>(e=>{L.value=!0,Q.value=C.ResourceUrl+e.video})(e)),["stop"])},{default:c((()=>[p("点击预览")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),i(s,{title:"审核状态","hover-class":"none",arrow:!1},{label:c((()=>[i(P,{approve:n(H).scStudioApproveDetails,createtime:n(H).createtime},null,8,["approve","createtime"])])),_:1})])),_:1})):_("v-if",!0),n(Y)?(o(),r(y,{key:1,class:"p-4 flex flex-col gap-3"},{default:c((()=>[i(y,null,{default:c((()=>[p("审批意见")])),_:1}),i(y,{class:"px-4"},{default:c((()=>[i(D,{height:"200","custom-style":{backgroundColor:"#F6F6F6",borderRadius:"20rpx",padding:"10rpx"},modelValue:n(Z),"onUpdate:modelValue":a[0]||(a[0]=e=>v(Z)?Z.value=e:null),type:"textarea","auto-height":"",class:"auto-height"},null,8,["modelValue"])])),_:1}),i(y,{class:"flex justify-evenly"},{default:c((()=>[i(g,{size:"mini","custom-style":{padding:"0 30rpx"},onClick:a[1]||(a[1]=e=>G("-10"))},{default:c((()=>[p("不通过")])),_:1}),i(g,{size:"mini","custom-style":{padding:"0 30rpx"},type:"info",onClick:a[2]||(a[2]=e=>G("-20"))},{default:c((()=>[p("退回修改")])),_:1}),i(g,{size:"mini","custom-style":{padding:"0 30rpx"},type:"primary ",onClick:a[3]||(a[3]=e=>G(20))},{default:c((()=>[p("通过")])),_:1})])),_:1})])),_:1})):_("v-if",!0)])),_:1}),i($,{modelValue:n(L),"onUpdate:modelValue":a[4]||(a[4]=e=>v(L)?L.value=e:null),"show-title":!1,"show-confirm-button":!1,"mask-close-able":!0},{default:c((()=>[i(y,{class:"slot-content flex justify-center items-center"},{default:c((()=>[i(B,{src:n(Q),autoplay:!0},null,8,["src"])])),_:1})])),_:1},8,["modelValue"])],64)}}});export{B as default};
