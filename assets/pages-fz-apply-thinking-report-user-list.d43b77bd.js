import{k as e,a1 as t,L as a,T as s,m as n,M as i,p as r,q as l,a2 as o,s as u,$ as c,o as p,b as m,a as d,w as h,x as g,g as f,F as v,r as y,c as _,f as k,a4 as b,B as w,C as x,h as j,j as C,t as R,D as $,K as T,S as z}from"./index.f8f0a8a6.js";import{_ as B}from"./u-navbar.1284843c.js";import{_ as S}from"./message.vue_vue_type_script_setup_true_lang.2049d432.js";import{u as A,_ as F}from"./useTabSwiper.1a899c38.js";import{_ as N,a as D}from"./u-cell-group.c1b9a19e.js";import{_ as H}from"./u-tag.2e01dec1.js";import{_ as I}from"./u-image.ae6c79b6.js";import{_ as q}from"./u-button.9b5620aa.js";import{_ as K}from"./u-loadmore.9028c00d.js";import{g as L}from"./go.241c4b18.js";import{a as M,d as U}from"./thinking-report.646f4819.js";import{w as W}from"./index.14235ccc.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";import"./u-badge.ceeaba0f.js";import"./u-line.334abfea.js";const G=E(e({__name:"user-list",setup(e){b((e=>({"0ea7c9ec":g(E)})));const{statusBarHeight:E}=t(),G=a(),J=s(),O=n(null),{tabCurrent:P,swiperCurrent:Q,tabsChange:V,transition:X,animationFinish:Y}=A(O),Z=n(null),ee=n("teacher"),te=n(""),ae=n(["thinkingReportContinued","thinkingReportNmb","thinkingReport"]),se=i([{name:"待审核"},{name:"已审核"},{name:"全部"}]),ne=r((()=>{const e=new Set;return(t,a)=>a==Q.value||e.has(a)?(e.add(a),$.ResourceUrl+t):void 0})),ie=async()=>{var e;Z.value=await M({username:"student"==ee.value?null==(e=J.userInfo)?void 0:e.username:te.value}),"student"==ee.value?(Z.value.thinkingReportToBeSubmitted&&(se[0].name=`待提交(${Z.value.thinkingReportToBeSubmitted.length})`),se[1].name=`待审核(${Z.value.thinkingReportContinued.length})`,se[2].name=`已审核(${Z.value.thinkingReportNmb.length})`,se[3].name=`全部(${Z.value.thinkingReport.length})`):(se[0].name=`待审核(${Z.value.thinkingReportContinued.length})`,se[1].name=`已审核(${Z.value.thinkingReportNmb.length})`,se[2].name=`全部(${Z.value.thinkingReport.length})`)};return l((e=>{e&&e.type&&(ee.value=e.type,e.username&&["teacher","partyBranch"].includes(ee.value)?te.value=e.username:(ae.value.unshift("thinkingReportToBeSubmitted"),se.unshift({name:"待提交"}))),ie(),o("refresh",ie)})),u((()=>c("refresh"))),(e,t)=>{const a=w(x("u-navbar"),B),s=w(x("message"),S),n=w(x("u-tabs-swiper"),F),i=w(x("u-cell-item"),N),r=w(x("u-tag"),H),l=w(x("u-image"),I),o=j,u=w(x("u-button"),q),c=w(x("u-cell-group"),D),b=w(x("u-loadmore"),K),$=T,A=z,M=C;return p(),m(v,null,[d(a,{title:"思想汇报"}),d(s,{navbarHeight:48}),d(o,{class:"container"},{default:h((()=>[d(n,{ref_key:"uTabs",ref:O,list:g(se),current:g(P),onChange:g(V),"is-scroll":!1,swiperWidth:"750","active-color":"#D13333","bg-color":"rgb(245, 247, 251)"},null,8,["list","current","onChange"]),f(" 列表 "),d(M,{class:"h-full",current:g(Q),onTransition:g(X),onAnimationfinish:g(Y)},{default:h((()=>[f(" 用户思想汇报 "),(p(!0),m(v,null,y(g(ae),((e,t)=>(p(),_(A,{class:"swiper-item",key:t},{default:h((()=>[d($,{"scroll-y":"",style:{height:"100%",width:"100%"},class:"scroll-y"},{default:h((()=>[g(Z)?(p(),_(o,{key:0,class:"p-2 flex flex-col gap-2"},{default:h((()=>[(p(!0),m(v,null,y(g(Z)[e],(e=>(p(),_(o,{key:e.code,class:"rounded-40rpx overflow-hidden",onClick:t=>["student","partyBranch"].includes(g(ee))?g(L)(`/pages/fz-apply/thinking-report/review?code=${e.code}&type=view`):g(L)(`/pages/fz-apply/thinking-report/review?code=${e.code}&type=review`)},{default:h((()=>[d(c,null,{default:h((()=>[d(i,{title:"提交用户","hover-class":"none",arrow:!1},{"right-icon":h((()=>[k(R(e.realname),1)])),_:2},1024),d(i,{title:"提交日期","hover-class":"none",arrow:!1},{"right-icon":h((()=>[k(R(e.createtime),1)])),_:2},1024),d(i,{class:"image_cell","hover-class":"none",title:"思想汇报",arrow:!1},{"right-icon":h((()=>[d(r,{class:"absolute top-0 right-30 translate-y-1-sl-2",text:g(W)[e.status].description,type:g(W)[e.status].type,mode:"light"},null,8,["text","type"])])),label:h((()=>[d(o,{class:"flex gap-4 mt-2"},{default:h((()=>[(p(!0),m(v,null,y(e.thinkAddress,((e,a)=>(p(),_(l,{key:a,width:"180rpx",height:"180rpx",src:g(ne)(e,t),mode:"widthFix"},null,8,["src"])))),128))])),_:2},1024),"student"==g(ee)?(p(),_(o,{key:0,class:"flex justify-end gap-5 mt-2"},{default:h((()=>[[0,-20].includes(e.status)?(p(),_(u,{key:0,size:"medium",shape:"circle","custom-style":{padding:"0 40rpx"},type:"warning",onClick:t=>g(L)(`/pages/fz-apply/thinking-report/submit?type=edit&code=${e.code}`),plain:"",class:"plain"},{default:h((()=>[k("修改")])),_:2},1032,["onClick"])):f("v-if",!0),[0,-10,-20].includes(e.status)?(p(),_(u,{key:1,size:"medium",shape:"circle","custom-style":{padding:"0 40rpx"},onClick:t=>(async e=>{await G.confirm({content:"确定删除该思想汇报？",title:"确定删除？"}),await U({trCode:e}),G.showTips({title:"删除成功",type:"success"}),ie()})(e.code),type:"error",plain:"",class:"plain"},{default:h((()=>[k("删除")])),_:2},1032,["onClick"])):f("v-if",!0)])),_:2},1024)):f("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)):f("v-if",!0),d(b,{class:"leading-80rpx",status:"nomore"})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current","onTransition","onAnimationfinish"]),"student"==g(ee)?(p(),_(o,{key:0,class:"w-full h-150rpx fixed bottom-0 z-999 flex justify-center items-center opacity-100"},{default:h((()=>[d(u,{type:"primary","hover-class":"none",shape:"circle",class:"w-50-pes-","custom-style":{background:"#e35959"},onClick:t[0]||(t[0]=e=>g(L)("/pages/fz-apply/thinking-report/submit?type=add"))},{default:h((()=>[k("新增")])),_:1})])),_:1})):f("v-if",!0)])),_:1})],64)}}}),[["__scopeId","data-v-e7619884"]]);export{G as default};
