import{k as e,L as a,m as s,M as t,q as l,o,b as r,a as u,w as i,x as n,c as p,F as m,r as c,g as d,f,t as _,Y as y,Z as v,H as g,B as h,C as x,h as w,D as b}from"./index.7dddb93e.js";import{_ as j}from"./u-navbar.2247389e.js";import{_ as k,d as C}from"./message.vue_vue_type_script_setup_true_lang.167ae55e.js";import{_ as F,a as V}from"./u-cell-group.3ff6fc80.js";import{_ as A}from"./u-image.079e795d.js";import{_ as z}from"./u-input.4a92a7e0.js";import{_ as D}from"./u-button.7f757efe.js";import{c as T,e as U}from"./formal-apply.22f29fa9.js";import{w as H}from"./workflow.7aa87218.js";import{w as L}from"./index.14235ccc.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./emitter.9c2dba95.js";import"./u-line.65c408c3.js";const R=e({__name:"review",setup(e){const R=a(),q=s(null),B=s(null),M=t({opinion:"",status:20,username:""}),Y=["通过","退回修改","不通过"],Z=s(!1),E=e=>{switch(M.opinion&&!Y.includes(M.opinion)||(M.opinion=Y[e-1]),e){case 1:M.status=20;break;case 2:M.status=-20;break;case 3:M.status=-10}Z.value=!0},G=async()=>{await U(M),R.showTips({title:"提交成功",type:"success"}),v("refresh"),setTimeout((()=>{g()}),500)};return l((async e=>{e&&e.type&&(B.value=e.type),e&&e.username&&(M.username=e.username,q.value=await T({username:e.username}))})),(e,a)=>{const s=h(x("u-navbar"),j),t=h(x("message"),k),l=h(x("u-cell-item"),F),v=h(x("u-image"),A),g=w,T=h(x("u-cell-group"),V),U=h(x("u-input"),z),R=h(x("u-button"),D),Y=h(x("u-modal"),C);return o(),r(m,null,[u(s,{title:"审核转正申请"}),u(t,{navbarHeight:48}),u(g,{class:"container"},{default:i((()=>{var e;return[n(q)?(o(),p(T,{key:0},{default:i((()=>[u(l,{title:"提交日期","hover-class":"none",arrow:!1,value:n(q).formalApplyDate},null,8,["value"]),u(l,{title:"转正申请","hover-class":"none",arrow:!1},{label:i((()=>[u(g,{class:"flex gap-5 justify-center mt-2"},{default:i((()=>[(o(!0),r(m,null,c(n(q).formalApplyAddress,((e,a)=>(o(),p(v,{key:a,width:"175rpx",height:"175rpx",src:n(b).ResourceUrl+e,mode:"widthFix"},null,8,["src"])))),128))])),_:1})])),_:1}),u(l,{title:"审核状态","hover-class":"none",arrow:!1},{label:i((()=>[u(H,{approve:n(q).fzFlowList,createtime:n(q).formalApplyDate},null,8,["approve","createtime"])])),_:1})])),_:1})):d("v-if",!0),"review"==n(B)&&n(q)&&![20,-10].includes(null==(e=n(q))?void 0:e.formalApplyType)?(o(),p(g,{key:1,class:"p-4 flex flex-col gap-3"},{default:i((()=>[u(g,null,{default:i((()=>[f("审批意见")])),_:1}),u(g,{class:"px-4"},{default:i((()=>[u(U,{height:"200","custom-style":{backgroundColor:"#F6F6F6",borderRadius:"20rpx",padding:"20rpx"},modelValue:n(M).opinion,"onUpdate:modelValue":a[0]||(a[0]=e=>n(M).opinion=e),type:"textarea","auto-height":"",class:"auto-height"},null,8,["modelValue"])])),_:1}),u(g,{class:"flex justify-evenly"},{default:i((()=>[u(R,{onClick:a[1]||(a[1]=e=>E(1)),size:"mini","custom-style":{padding:"0 30rpx"},type:"primary"},{default:i((()=>[f("通过")])),_:1}),u(R,{onClick:a[2]||(a[2]=e=>E(2)),size:"mini","custom-style":{padding:"0 30rpx"},type:"warning"},{default:i((()=>[f("退回修改")])),_:1}),u(R,{onClick:a[3]||(a[3]=e=>E(3)),size:"mini","custom-style":{padding:"0 30rpx"},type:"error"},{default:i((()=>[f("不通过")])),_:1})])),_:1})])),_:1})):d("v-if",!0)]})),_:1}),u(Y,{modelValue:n(Z),"onUpdate:modelValue":a[4]||(a[4]=e=>y(Z)?Z.value=e:null),title:"是否提交审批","show-cancel-button":"",onConfirm:G,class:"show-cancel-button"},{default:i((()=>[u(g,{class:"p-5 text-center text-sm"},{default:i((()=>[u(g,null,{default:i((()=>[f(" 审批状态："+_(n(L)[n(M).status].description),1)])),_:1}),u(g,null,{default:i((()=>[f(" 审批意见："+_(n(M).opinion),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});export{R as default};
