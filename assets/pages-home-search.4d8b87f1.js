import{k as e,u as a,L as s,l,m as t,a0 as o,o as u,b as c,a as r,w as n,g as i,x as m,Y as f,F as p,r as h,c as _,B as v,C as d,h as g,e as S,f as x,t as y,i as b}from"./index.f8f0a8a6.js";import{_ as k}from"./u-navbar.1284843c.js";import{_ as H,a as w}from"./message.vue_vue_type_script_setup_true_lang.2049d432.js";import{_ as I}from"./u-search.e7ce9eeb.js";import{_ as R}from"./u-section.d12c4215.js";import{_ as C}from"./u-tag.2e01dec1.js";import{_ as j,a as E}from"./u-cell-group.c1b9a19e.js";import{_ as T}from"./u-empty.2328452f.js";import{g as L}from"./go.241c4b18.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Y=e({__name:"search",setup(e){const Y=a(),A=s(),O=l(),F=t(!1),V=t(""),B=t([]),N=t([]);o((()=>{B.value=O.getLocalInfo("SEARCH_HISTORY")}));const q=e=>{!e||B.value&&B.value[B.value.length-1]==e||(B.value.length>10?(B.value.shift(),O.setLocaleInfoSync("SEARCH_HISTORY",[...B.value,e],!0)):O.setLocaleInfoSync("SEARCH_HISTORY",[e]),V.value="",$(Y.getService,e),B.value=O.getLocalInfo("SEARCH_HISTORY"))},z=e=>{V.value=B.value[e],$(Y.getService,V.value)},U=()=>{O.setLocaleInfoSync("SEARCH_HISTORY",[],!0),B.value=O.getLocalInfo("SEARCH_HISTORY")},$=(e,a)=>{N.value=[],e.forEach((e=>{e.children.forEach((s=>{s.name.includes(a)&&N.value.push({name:s.name,url:s.url,icon:s.icon,fartherName:e.name})}))})),0==N.value.length&&setTimeout((()=>{A.showTips({title:"搜索结果暂无数据",type:"info"})}),500)};return(e,a)=>{const s=v(d("u-navbar"),k),l=v(d("message"),H),t=v(d("u-search"),I),o=g,Y=v(d("u-icon"),w),A=v(d("u-section"),R),O=v(d("u-tag"),C),$=b,D=v(d("u-cell-item"),j),G=v(d("u-cell-group"),E),J=v(d("u-empty"),T);return u(),c(p,null,[r(s,{title:"搜索","border-bottom":!1}),r(l,{navbarHeight:48}),r(o,{class:"container"},{default:n((()=>[i(" 搜索 "),i(' <u-mask :show="show" @click="show = false"> </u-mask> '),r(o,{class:"pb-2 px-2 pt-1 opacity-100 w-full mb-2"},{default:n((()=>[r(t,{onSearch:q,onFocus:a[0]||(a[0]=e=>F.value=!0),onBlur:a[1]||(a[1]=e=>F.value=!1),placeholder:"搜索服务",shape:"square",modelValue:m(V),"onUpdate:modelValue":a[2]||(a[2]=e=>f(V)?V.value=e:null)},null,8,["modelValue"])])),_:1}),i(" 历史搜索 "),r(o,{class:"px-2"},{default:n((()=>[r(A,{"show-line":!1,title:"历史搜索",onClick:U},{right:n((()=>[r(Y,{size:"26",name:"/static/icon/home/clear.svg",class:"mr-2"})])),_:1}),r(o,{class:"flex mt-2 gap-2 flex-wrap"},{default:n((()=>[(u(!0),c(p,null,h([...m(B)].reverse(),((e,a)=>(u(),_(O,{onClick:z,index:m(B).length-1-a,mode:"dark",type:"info","bg-color":"#f2f2f2",color:"#606266",key:a,text:e},null,8,["index","text"])))),128))])),_:1})])),_:1}),i(" 搜索结果 "),r(o,{class:"px-2 py-2"},{default:n((()=>[r(A,{class:"mb-10","show-line":!1,title:"搜索结果"}),0!==m(N).length?(u(),_(G,{key:0},{default:n((()=>[(u(!0),c(p,null,h(m(N),((e,a)=>(u(),_(D,{arrow:!1,key:a,onClick:S((a=>m(L)(e.url)),["stop"])},{icon:n((()=>[r($,{class:"w-60 h-60",src:`/static/icon/service${e.icon}`,mode:"widthFix"},null,8,["src"])])),"right-icon":n((()=>[x(y(e.name)+"("+y(e.fartherName)+")",1)])),_:2},1032,["onClick"])))),128))])),_:1})):(u(),_(o,{key:1,class:"mt-40 v-else"},{default:n((()=>[r(J,{text:"暂无数据",mode:"list",class:"text-暂无数据"})])),_:1}))])),_:1})])),_:1})],64)}}});export{Y as default};
