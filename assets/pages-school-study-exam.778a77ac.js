import{k as s,a1 as t,L as e,l as n,m as i,p as a,q as o,s as r,o as u,b as l,a as d,x as c,c as h,w as f,f as m,t as p,g as y,F as $,r as v,a4 as g,B as b,C as _,h as x}from"./index.7dddb93e.js";import{_ as w}from"./u-navbar.2247389e.js";import{_ as M}from"./message.vue_vue_type_script_setup_true_lang.167ae55e.js";import{_ as k}from"./u-section.0d3c8435.js";import{_ as q,a as j}from"./u-radio-group.1a98b216.js";import{_ as S,a as C}from"./u-checkbox-group.d4356cf6.js";import{_ as Y}from"./u-button.7f757efe.js";import{g as I}from"./go.59004091.js";import{c as H,s as D}from"./study.882a7b91.js";import{c as F,d as E}from"./dayjs.min.4485b413.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";import"./emitter.9c2dba95.js";import"./JSEncrypt.1622f795.js";var T,N,A,L,P,z,V,X,B,J,W,Z,G,K,Q,R,U,ss,ts,es={exports:{}};const ns=es.exports=(V=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,J=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,W={years:X=31536e6,months:B=2592e6,days:z=864e5,hours:P=36e5,minutes:L=6e4,seconds:A=1e3,milliseconds:1,weeks:6048e5},Z=function(s){return s instanceof ts},G=function(s,t,e){return new ts(s,e,t.$l)},K=function(s){return N.p(s)+"s"},Q=function(s){return s<0},R=function(s){return Q(s)?Math.ceil(s):Math.floor(s)},U=function(s){return Math.abs(s)},ss=function(s,t){return s?Q(s)?{negative:!0,format:""+U(s)+t}:{negative:!1,format:""+s+t}:{negative:!1,format:""}},ts=function(){function s(s,t,e){var n=this;if(this.$d={},this.$l=e,void 0===s&&(this.$ms=0,this.parseFromMilliseconds()),t)return G(s*W[K(t)],this);if("number"==typeof s)return this.$ms=s,this.parseFromMilliseconds(),this;if("object"==typeof s)return Object.keys(s).forEach((function(t){n.$d[K(t)]=s[t]})),this.calMilliseconds(),this;if("string"==typeof s){var i=s.match(J);if(i){var a=i.slice(2).map((function(s){return null!=s?Number(s):0}));return this.$d.years=a[0],this.$d.months=a[1],this.$d.weeks=a[2],this.$d.days=a[3],this.$d.hours=a[4],this.$d.minutes=a[5],this.$d.seconds=a[6],this.calMilliseconds(),this}}return this}var t=s.prototype;return t.calMilliseconds=function(){var s=this;this.$ms=Object.keys(this.$d).reduce((function(t,e){return t+(s.$d[e]||0)*W[e]}),0)},t.parseFromMilliseconds=function(){var s=this.$ms;this.$d.years=R(s/X),s%=X,this.$d.months=R(s/B),s%=B,this.$d.days=R(s/z),s%=z,this.$d.hours=R(s/P),s%=P,this.$d.minutes=R(s/L),s%=L,this.$d.seconds=R(s/A),s%=A,this.$d.milliseconds=s},t.toISOString=function(){var s=ss(this.$d.years,"Y"),t=ss(this.$d.months,"M"),e=+this.$d.days||0;this.$d.weeks&&(e+=7*this.$d.weeks);var n=ss(e,"D"),i=ss(this.$d.hours,"H"),a=ss(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var r=ss(o,"S"),u=s.negative||t.negative||n.negative||i.negative||a.negative||r.negative,l=i.format||a.format||r.format?"T":"",d=(u?"-":"")+"P"+s.format+t.format+n.format+l+i.format+a.format+r.format;return"P"===d||"-P"===d?"P0D":d},t.toJSON=function(){return this.toISOString()},t.format=function(s){var t=s||"YYYY-MM-DDTHH:mm:ss",e={Y:this.$d.years,YY:N.s(this.$d.years,2,"0"),YYYY:N.s(this.$d.years,4,"0"),M:this.$d.months,MM:N.s(this.$d.months,2,"0"),D:this.$d.days,DD:N.s(this.$d.days,2,"0"),H:this.$d.hours,HH:N.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:N.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:N.s(this.$d.seconds,2,"0"),SSS:N.s(this.$d.milliseconds,3,"0")};return t.replace(V,(function(s,t){return t||String(e[s])}))},t.as=function(s){return this.$ms/W[K(s)]},t.get=function(s){var t=this.$ms,e=K(s);return"milliseconds"===e?t%=1e3:t="weeks"===e?R(t/W[e]):this.$d[e],0===t?0:t},t.add=function(s,t,e){var n;return n=t?s*W[K(t)]:Z(s)?s.$ms:G(s,this).$ms,G(this.$ms+n*(e?-1:1),this)},t.subtract=function(s,t){return this.add(s,t,!0)},t.locale=function(s){var t=this.clone();return t.$l=s,t},t.clone=function(){return G(this.$ms,this)},t.humanize=function(s){return T().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},s}(),function(s,t,e){T=e,N=e().$utils(),e.duration=function(s,t){var n=e.locale();return G(s,{$l:n},t)},e.isDuration=Z;var n=t.prototype.add,i=t.prototype.subtract;t.prototype.add=function(s,t){return Z(s)&&(s=s.asMilliseconds()),n.bind(this)(s,t)},t.prototype.subtract=function(s,t){return Z(s)&&(s=s.asMilliseconds()),i.bind(this)(s,t)}}),is=s({__name:"exam",setup(s){g((s=>({81239268:c(F)}))),E.extend(ns);const{statusBarHeight:F}=t(),O=e(),T=n(),N=i(0),A=i(""),L=i("");let P,z,V;const X=s=>{var t,e;if(!W.value)return;const n=W.value.questions[N.value];0===n.type||2===n.type?n.result=c(s):1===n.type&&(s.value?null==(t=n.result)||t.push(s.name):n.result=null==(e=n.result)?void 0:e.filter((t=>t!==s.name)))},B=a((()=>(s,t)=>{switch(s){case 0:return`单选题（${t.toFixed(1)}）`;case 1:return`多选题（${t.toFixed(1)}）`;case 2:return`判断题（${t.toFixed(1)}）`}})),J=async s=>{let t=[];if(!W.value)return;W.value.questions.forEach(((e,n)=>{if(!e.result||!e.result.length){if(!s)throw O.showTips({title:`第${n+1}题未作答`,type:"warning"}),N.value=n,new Error(`第${n+1}题未作答`);e.result=""}t.push({questionCode:e.code,answer:"string"==typeof e.result?[c(e.result)]:c(e.result)})}));const e=await D(t),n=T.getLocalInfo("EXAM_INFO");delete n[A.value],T.setLocaleInfoSync("EXAM_INFO",n,!0),setTimeout((()=>I(`/pages/school-study/exam-result?score=${e.score}&partyClassCode=${A.value}`,!0)),500)},W=i(null),Z=()=>{const s=E.duration(P.diff(E()));V=P.diff(E(),"second"),L.value=s.format("HH:mm:ss"),300==V?O.showTips({title:"考试时间仅剩5分钟",type:"warning"}):V<=0&&(J(!0),clearInterval(z),O.showTips({title:"已为您自动交卷"}))};return o((async s=>{if(s&&s.partyClassCode){A.value=s.partyClassCode;const t=await H({partyClassCode:A.value}),e=T.getLocalInfo("EXAM_INFO")[A.value];W.value=t,W.value.questions.forEach(((s,t)=>{switch(s.type){case 0:case 2:s.result="";break;case 1:s.result=[]}e&&(s.result=e[t])})),P=E().add(t.remainingTime,"second"),z=setInterval(Z,1e3)}})),r((()=>{var s;clearInterval(z),V>0&&T.setLocaleInfoSync("EXAM_INFO",{[A.value]:null==(s=W.value)?void 0:s.questions.map((s=>s.result))})})),(s,t)=>{const e=b(_("u-navbar"),w),n=b(_("message"),M),i=x,a=b(_("u-section"),k),o=b(_("u-radio"),q),r=b(_("u-radio-group"),j),g=b(_("u-checkbox"),S),I=b(_("u-checkbox-group"),C),H=b(_("u-button"),Y);return u(),l($,null,[d(e,{title:"考试"}),d(n,{navbarHeight:48}),c(W)?(u(),h(i,{key:0,class:"container p-2 gap-5"},{default:f((()=>[d(i,{class:"mx-auto mt-5",style:{"font-size":"45rpx"}},{default:f((()=>[m(p(c(W).title),1)])),_:1}),d(i,{class:"mx-auto text-red-500 font-bold"},{default:f((()=>[m("考试剩余时间："+p(c(L)),1)])),_:1}),d(a,{title:c(B)(c(W).questions[c(N)].type,c(W).questions[c(N)].score),"font-size":"34","show-line":!1,bold:!1,arrow:!1,"sub-title":`${c(N)+1}/${c(W).questions.length}`},null,8,["title","sub-title"]),d(i,{style:{"font-size":"30rpx"}},{default:f((()=>[m(p(c(N)+1)+"."+p(c(W).questions[c(N)].title),1)])),_:1}),y(" 单选题 判断题 "),0==c(W).questions[c(N)].type||2==c(W).questions[c(N)].type?(u(),h(i,{key:c(N)},{default:f((()=>[d(r,{modelValue:c(W).questions[c(N)].result,onChange:X},{default:f((()=>[d(i,{class:"flex flex-col gap-2"},{default:f((()=>[(u(!0),l($,null,v(c(W).questions[c(N)].options,((s,t)=>(u(),h(o,{key:s.code,name:s.code,class:"bg-white"},{default:f((()=>[m(p(s.option),1)])),_:2},1032,["name"])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})):1==c(W).questions[c(N)].type?(u(),l($,{key:1},[y(" 多选题 "),d(i,null,{default:f((()=>[d(I,null,{default:f((()=>[d(i,{class:"flex flex-col gap-2"},{default:f((()=>[(u(!0),l($,null,v(c(W).questions[c(N)].options,((s,t)=>{var e;return u(),h(g,{modelValue:null==(e=c(W).questions[c(N)].result)?void 0:e.includes(s.code),onChange:X,key:s.code,name:s.code},{default:f((()=>[m(p(s.option),1)])),_:2},1032,["modelValue","name"])})),128))])),_:1})])),_:1})])),_:1})],2112)):y("v-if",!0)])),_:1})):y("v-if",!0),d(i,{class:"fixed flex justify-between gap-5 bottom-0 p-5 w-full bg-white rounded-t-lg",style:{"box-shadow":"0px 2px 15px 0px rgba(184, 184, 210, 0.5)"}},{default:f((()=>[d(H,{class:"flex-1",disabled:c(N)<=0,type:"primary",onClick:t[0]||(t[0]=s=>N.value--)},{default:f((()=>[m("上一题")])),_:1},8,["disabled"]),c(W)&&c(N)<c(W).questions.length-1?(u(),h(H,{key:0,class:"flex-1",disabled:c(W)&&c(N)>=c(W).questions.length-1,type:"primary",onClick:t[1]||(t[1]=s=>N.value++)},{default:f((()=>[m("下一题")])),_:1},8,["disabled"])):(u(),h(H,{key:1,class:"flex-1 v-else",type:"primary",onClick:t[2]||(t[2]=s=>J(!1))},{default:f((()=>[m("提交")])),_:1}))])),_:1})],64)}}}),as=O(is,[["__scopeId","data-v-c3699bf0"]]);export{as as default};
