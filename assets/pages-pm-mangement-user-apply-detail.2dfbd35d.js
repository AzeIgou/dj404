import{k as e,L as a,T as t,m as s,q as l,o as r,b as o,a as i,w as u,x as p,c,f as n,t as m,F as d,r as f,g as _,Y as g,Z as v,Q as y,B as h,C as w,h as x,D as j,e as b,ab as k}from"./index.7dddb93e.js";import{_ as C}from"./u-navbar.2247389e.js";import{_ as T}from"./message.vue_vue_type_script_setup_true_lang.167ae55e.js";import{_ as F,a as V}from"./u-cell-group.3ff6fc80.js";import{_ as z}from"./u-input.4a92a7e0.js";import{_ as R}from"./u-button.7f757efe.js";import{w as U}from"./workflow.7aa87218.js";import{a as A,c as D}from"./index.2dd11e89.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./emitter.9c2dba95.js";import"./u-line.65c408c3.js";import"./index.14235ccc.js";const q=e({__name:"detail",setup(e){const q=a();t();const B=s();s([]);let G=s(""),H=s("");l((async e=>{if(e&&e.code){H.value=e.code;const a=await A({code:e.code});B.value=a}}));const L=async e=>{await D({flowCode:H.value,opinion:G.value,status:e}),q.showTips({title:"审批成功",type:"success"}),v("approveSuccess"),setTimeout((()=>{y({url:`/pages/pm-mangement/user-apply/detail?code=${H.value}`}),G.value=""}),1e3)};return(e,a)=>{const t=h(w("u-navbar"),C),s=h(w("message"),T),l=h(w("u-cell-item"),F),v=x,y=h(w("u-cell-group"),V),A=h(w("u-input"),z),D=h(w("u-button"),R);return r(),o(d,null,[i(t,{title:"申报详情"}),i(s,{navbarHeight:48}),i(v,{class:"container"},{default:u((()=>[p(B)?(r(),c(y,{key:0},{default:u((()=>[i(l,{title:"申报标题",arrow:!1},{"right-icon":u((()=>[n(m(p(B).title),1)])),_:1}),i(l,{title:"申报类别",arrow:!1},{"right-icon":u((()=>[n(m(p(B).pioneerParent),1)])),_:1}),i(l,{title:"申报分项",arrow:!1},{"right-icon":u((()=>[n(m(p(B).pioneerName),1)])),_:1}),i(l,{title:"申请分数",arrow:!1},{"right-icon":u((()=>[n(m(p(B).applyGrades),1)])),_:1}),i(l,{title:"申报周期",arrow:!1},{"right-icon":u((()=>[n(m(p(B).pioneerType),1)])),_:1}),i(l,{title:"申报时间",arrow:!1},{"right-icon":u((()=>[i(v,null,{default:u((()=>[n(m(p(B).createTime.split("T")[0]),1)])),_:1})])),_:1}),i(l,{title:"申报附件",arrow:!1},{"right-icon":u((()=>[(r(!0),o(d,null,f(p(B).files,((e,a)=>(r(),o("img",{class:"w-60rpx h-60rpx alt",src:p(j).ResourceUrl+e.url,alt:"",onClick:b((e=>((e,a)=>{k({urls:e.map((e=>j.ResourceUrl+e.url)),current:a})})(p(B).files,a)),["stop"]),key:a},null,8,["src","onClick"])))),128))])),_:1}),i(l,{title:"审核状态","hover-class":"none",arrow:!1},{label:u((()=>[i(U,{approve:p(B).flowApproveDetailsVos,createtime:p(B).createtime},null,8,["approve","createtime"])])),_:1})])),_:1})):_("v-if",!0),p(B).canApprove?(r(),c(v,{key:1,class:"p-4 flex flex-col gap-3"},{default:u((()=>[i(v,null,{default:u((()=>[n("审批意见")])),_:1}),i(v,{class:"px-4"},{default:u((()=>[i(A,{height:"200","custom-style":{backgroundColor:"#F6F6F6",borderRadius:"20rpx",padding:"10rpx"},modelValue:p(G),"onUpdate:modelValue":a[0]||(a[0]=e=>g(G)?G.value=e:G=e),type:"textarea","auto-height":"",class:"auto-height"},null,8,["modelValue"])])),_:1}),i(v,{class:"flex justify-evenly"},{default:u((()=>[i(D,{size:"mini","custom-style":{padding:"0 30rpx"},onClick:a[1]||(a[1]=e=>L("-10"))},{default:u((()=>[n("不通过")])),_:1}),i(D,{size:"mini","custom-style":{padding:"0 30rpx"},type:"info",onClick:a[2]||(a[2]=e=>L("-20"))},{default:u((()=>[n("退回修改")])),_:1}),i(D,{size:"mini","custom-style":{padding:"0 30rpx"},type:"primary ",onClick:a[3]||(a[3]=e=>L(20))},{default:u((()=>[n("通过")])),_:1})])),_:1})])),_:1})):_("v-if",!0)])),_:1})],64)}}});export{q as default};
